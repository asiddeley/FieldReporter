<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title id='browserTab' >aisBot</title>

<script type='text/javascript' src="jquery/jquery.js"></script>
<script type='text/javascript' src="jquery/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css" href="jquery/jquery-ui.theme.css">
<link rel="stylesheet" type="text/css" href="jquery/jquery-ui.structure.css">
<link rel="stylesheet" type="text/css" href="jquery/jquery-ui.css">

<!-- bootstrap Libraries (after jQuery) -->
<script type='text/javascript' src="./bootstrap/bootstrap.min.js"></script>
<link rel="stylesheet" href="./bootstrap/bootstrap.min.css">

<!-- soup Library -->
<script type='text/javascript' src="./soup/dist/soup.js"></script>

<script type="text/javascript" src="./soup/AIengine.js"></script>

<style rel="stylesheet">
.row-bot {background:CORNSILK;}
.row-user {}
.pairs {display:none;}
.defs {display:none;}
.navbar-brand{margin:0;padding:0;}
.navbar-brand img{max-height: 100%;}
</style>

<script type="text/javascript">

//prevent accidental image drop
$(window).on({
	"drop": function(e){ e=e||event; e.preventDefault(); false;},
	"dragover":function(e){ e=e||event; e.preventDefault(); false;}
});

//inhibit the browser's right-click context menu
$(document).on("contextmenu", false);

////////////////globals
var ai;

function aiSubmit(rangeStr){

	var ul$=$("<ul></ul>").attr("class","row-user").text(rangeStr);
	$("#turnDialog").append(ul$);
	var result=ai.match(rangeStr);	
	var r=ai.getBestResponse();	
	ul$=$("<ul></ul>").attr("class","row-bot").text(r);
	$("#turnDialog").append(ul$);
	$("#results").text(JSON.stringify(ai.results));
	$(window).scrollTop(ul$.offset().top);

}


$(function() { 

	ai=new AIengine();
	var patt$=$("pairs").children("patt");
	var resp$=$("pairs").children("resp");
	var left$=$("pairs").children("left");
	var right$=$("pairs").children("right");
	console.log("pairs:", patt$.length, resp$.length, left$.length, right$.length);
	console.log("attr('function')", $("topic").attr("list"));
	//ai.pairsFromHTML($("pairs")); 
	//ai.defsFromHTML($("defs"));
	
}); //ready



</script>

</head>
<body>

<!-- PAGE STARTS HERE -->
<nav class="navbar navbar-fixed-top navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand row-bot" href="#">
        <img alt="MONOLITO" src="./soup/aiMonolito500x500.png" >
      </a>
    </div>
	<p class="navbar-text">Monolito</p>
	
	<div class="navbar-form navbar-left">
		<div class="form-group">
		<input id="userInput" type="text" class="form-control" placeholder="enter text" style="width:400px">
		</div>		
		<button class="btn btn-default" onclick="aiSubmit($('#userInput').val());">submit</button>
	</div>
	
  </div>
</nav>	
<br><br><br><br>
<div class="container-fluid">
	<!-- PANEL STARTS HERE -->
	<div class="panel panel-default" style="-width: 30rem;">

	<div class="panel-heading">Session 101<br>
	<!--</div><div class="panel-body">-->
	date: 13:24, 23 Sep 2017<br>
	context No.: 23,101<br>
	participant: Andrew
	</div>
	
	<ul id="turnDialog" class="list-group list-group-flush">
	</ul>

	<div class="panel-footer panel-primary">
		<div class="btn-group btn-group-xs" role="group" aria-label="...">
		<button type="button" class="btn btn-default">yes</button>
		<button type="button" class="btn btn-default">no</button>
		<button type="button" class="btn btn-default">quit Session</button>
		</div>

		<!--a href="#" class="card-link">Card link</a -->
		<!--a href="#" class="card-link">Another link</a -->
	</div> 	<!-- END OF FOOTER -->

	</div> 	<!-- END OF PANEL -->
	<p id="results">Results<br></p>
	<cdata id="extra"></cdata>
</div><!-- END OF container -->


<!--------------------------
AI PROGRAMMING 
A Siddeley 1/Oct/2017

A..z 	word or string
* 		wildcard
$ 		function, variable, list, means valueOf, responseOf, resultOf
@ 		argument
(,,) 	arguments
[*] 	list, pattern matches if any item in list is true
{} 		hash, map, dictionary
------------------------------------->
<!-- pairs <patt></patt><resp></resp> -->
<pairs>
<topic function>return "hello world";</topic>
<seed></seed><plan></plan>
<patt>what are you</patt><resp>I am a soupBot called monolito</resp>
<patt>what do you do</patt><resp>I can learn and answer questions in English</resp>
<patt>[noun] is [verb] a [noun]</patt><resp>that is a statement</resp>
<patt>what is [a] [known]</patt><resp>[known] is a [kindOf] [known]</resp>
<patt rem="matches if 4 terms are true">$isTrue() * [question] *</patt>
<resp>the answer to $term(2) may be $random(42)</resp> 

<patt>[question] *</patt><resp">$answer @rest</resp>
<patt>[topicChange]</patt><resp>[answer][rest]</resp>
<patt>HI</patt><resp choose="inturn" rem="or...all|random|nth">
Hello $getUser<br>
Hi $getUser<br>
Ah, fresh input<br>
</resp>
<patt>howdy *</patt><resp>$setq($topic,western) $patt(HI) or should I say $qt howdy partner! $qt $patt(*)</resp>

<patt>$isTrue() howdy *</patt><resp>$setq($topic,western) $patt(HI) partner! $eval(*)</resp>



<!--------------------
DEFINITIONS
defs <left></left><right></right> 
a def definnes a list, hash, function, variable, url?
--------------->

<!-- user defined functions -->
<left>$decrement</left><right args="num">return num-1;</right>
<left>$get</left><right function="n">return window.aidata[n];</right>
<left>$increment</left><right func="num">return num+1;</right>
<left>$isTrue</left><right arguments="topic">return true;</right>
<left>$random</left><right function="n">return n*Math.random();</right>
<left>$setq</left><right function="nam val">
	if (typeof window.aidata=="undefined"){window.aidata={};}
	window.aidata[nam]=val;return null;
</right>
<left>$term</left><right function="index">return ai.matchExec[index];</right>
<left>$user</left><right function>return ai.getUser();</right>

<!-- user defined inclusion lists/hashes -->
<left>[verbs]</left><right list>read reading look looking run running</right>
<left>[nouns]</left><right list>[people] [places] [things] [bots]</right>
<left>[people]</left><right list>andrew</right>
<left>[places]</left><right list>boardwalk</right>
<left>[things]</left><right list>screwdriver light-bulb</right>
<left>[bots]</left><right list>monolito binky exLax hedgehog gauge</right>


<left rem="indefinate-article">[a]</left><right list>a an</right>
<left rem="define a hash">{hash}</left><right hash>name:valu name2:valu2</right> 
<left rem="alternatly">#hash</left><right hash>name:valu name2:valu2</right> 
<left rem="defines list">#normalize</left><right hash>*?:?*</right> 
<left>[relation]</left><right list>[is][knows][likes][part][same][similar]</right> 
<left>[is]</left><right list>is was</right>
<left>[question]</left><right list>how what when where why ?</right> 

</pairs>
	
	

</body>

</html>

