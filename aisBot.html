<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title id='browserTab' >aisBot</title>


<!-- bootstrap v4 -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" 
	integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

<!-- soup Library -->
<script type='text/javascript' src="./soup/dist/soup.js"></script>
<!--script type='text/javascript' data-main="soup/soup" src="require/require.js"></script-->

<!-- Handlebars Template engine -->
<script type='text/javascript' src="handlebars/handlebars-v4.0.10.js"></script>

<!--script type='text/javascript' src="./handlebars/handlebars.min-latest.js" ></script-->
<!--script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script-->
<!--script type = "text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.js"></script-->

<!-- match Library -->
<script type='text/javascript' src="./match/matcher.js"></script>

<!--link rel="stylesheet" href="./soup/turnDialogStyle.css" -->

<style rel="stylesheet">
.row-bot {background:CORNSILK;}
.row-user {background:LAVENDER;}
</style>

<script type='text/javascript'>

//prevent accidental image drop
$(window).on({
	'drop': function(e){ e=e||event; e.preventDefault(); false;},
	'dragover':function(e){ e=e||event; e.preventDefault(); false;}
});

//inhibit the browser's right-click context menu
$(document).on('contextmenu', false);

//load script
var script=document.createElement("script");
script.type="text/javascript";
script.src="./soup/private/dbAPI.js";    
var dbAPI=document.head.appendChild(script);

function WordPattern(options){
	if (this===window) return new WordPattern(options);
	
	this.patts=[];//["["function(words){return true;}, "hello",...][...][...]]
	this.score=0;//0 to 1
	this.test=[];
	
	this.add=function(patternStr){
		//[...] hello [punc] my name is [properNoun arg1][...]
		//split at: space spaces comma square-brackets
		var patts.push(patternStr.split(/\s|,|\x5b|\x5d/gm));
	};
	this.check=function(patt, word){
		var r, p; 
		for (var i=0, i<patt.length; i++){
			p=patt[i];
			//p starts and ends with [] then it's a function
			if (p.charAt(0)=="["){	
			r=p(word);			}
			//p starts with [ then it's a function
			else if (p.charAt(0)=="[" ){ r=p(word);			}
			//p ends with ] then it's the end of a function
			else if ( ){	}
			//just a word
			else {r=(p==w);}
		}
		return r;
	};
	
	this.test=function(testStr){
		this.test=testStr.split(" ");
		var patt, i, j, k, r;
		for (i=0; i<this.patts.length; i++){
			patt=patts[i];
			for (j=0; j<patt.length; j++){
				for (k=0; k<test.length; k++){
					word=test[k];				
					r=this.check(patt, word);			
				};			
			};	
		};
		return r;		
	};
	
	this.bestTest=function(listOftestStrings){
	
	
	};

}




$(function() { 

	//console.log(window.dbAPI);
	


	var patt=['$a', rest];
	var test="Andrew is at home, reading a book".split(" ");
	
	//filters
	var people=["Andrew"];
	var places=["home"];
	var things=["book"];
	var nouns=people.concat(places.concat(things));
	var isNoun=function(w){console.log(w); return (nouns.indexOf(w) == -1)?false:true;}
	
	
	
	console.log("match test", match(patt, test, ['$a', isNoun])); //returns Andrew
	
/*****************
match(pattern, obj, filterObj)

pattern - the pattern to match against.
obj - object to match against the pattern.
filterObj optional - filter to run apply bindings to after isMatch runs.

returns - object that is the variable bindings when obj matches the pattern.  null when obj doesn't match the pattern. match is very similar to isMatch but instead of returning true or false returns what the variables are bound to in the match. compare with regex `exec`*

Examples - var matcher = require('js-matcher'), match = matcher.match, rest = matcher.rest

match(['$v',2], [1,2]) //{ '$v': 1 }
match(
	{ '$v':'$y', $x:[1,2,'$v'], i:'$x'},
	{ i:'d', b:[23, 44], a:3, c:3, d:[1,2,'b']}
) //returns { '$x': 'd', '$v': 'b', '$y': [ 23, 44 ] }

filter(filterObj, bindings)
filterObj - Mapping of varnames to filters.
bindings - Mapping of varnames to values.
returns - true if all passed, false if at least one did not pass. Filter iterates through the the mappings making sure that each value passes its associated filter.  A filter consists of either a function that takes the value and returns true if it passes the filter false if it doesn't, or an array that contains a list of acceptable values.
Example - var matcher = require('js-matcher'),filter = matcher.filter
function isOdd(x) {return x % 2;}
filter({ $a: [1,2] }, { $a: 1 }) // true
filter({ $a: isOdd }, { $a: 99 }) //true
filter({ $a: isOdd }, { $a: 106 }) //false
*********************/
	
	
	
	
}); //ready



</script>

</head>



<body>


<!-- TEMPLATES               -->
<template id='comments-template' type="text/x-handlebars-template">

	{{#each comments}}
	<div class='row row_'
			indexx={{@index}}
			onmouseenter='$(this).css("background-color","pink")'
			onmouseleave='$(this).css("background-color","white")'
			oncontextmenu='showMenu(CM$, event)'>
		<p id='itemNo'  indexx={{@index}} class='col-xs-1 itemNo'>{{#indexPlusOne @index}}{{/indexPlusOne}}</p>
		<p id='comment' indexx={{@index}} class='col-xs-10 comment-cell'>{{msg}}</p>
		<p id='picNo' indexx={{@index}} class='col-xs-1 picNo'>{{picRef}}</p>
	</div>
	{{/each}}
	
</template>

	
<!-- MENUS               -->
<div id='commentsMenu' onmouseleave='CM$.hide()' style='display:none'>
	<p onclick='commentsInsert(0, commentsData)'>Insert before</p>
	<p onclick='commentsInsert(1, commentsData)'>Insert after</p>
	<hr>
	<p onclick='console.log("Move up");$("#rowOptions").hide();'>Move up</p>
	<p onclick='console.log("Move dn");$("#rowOptions").hide();'>Move dn</p>
	<hr>
	<p onclick='commentsDelete(event);'>Delete</p>
	<hr>
	<p onclick='console.log("hide");'>Hide</p>
	<p onclick='console.log("show");'>Show hidden</p>
	<hr>
	<p onclick='testInsert();'>Test insert</p>
	<hr>
	<p onclick='CM$.hide()'>Exit</p>
</div>

<!-- PAGE STARTS HERE        -->

<div class='container'>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">Navbar</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li>
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>
<br>

<!-- CARD -->
<div class="card" style="-width: 30rem;">
  <!--div class="card-header">header</div-->

  <div class="card-body">
	<h4 class="card-title">Card title</h4>
	<h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
	<p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
    <a href="#" class="card-link">Card link</a>
    <a href="#" class="card-link">Another link</a>
  </div>
  

	<ul class="list-group list-group-flush">
	<li class="list-group-item row-user">hello</li>
	<li class="list-group-item row-bot">hi</li>
	<li class="list-group-item row-user">what is the meaning of life?</li>
	<li class="list-group-item row-bot" >long or short answer?</li>
	</ul>

  
  <!--div class="card-footer">footer</div-->
</div>				
		
		
		
</div>

<!-- TURN DIALOG TEST  
<div class="line-container"> 
    <ul> 
       <li class="place-right right-msg-container"> 
       <span class="msg-box-right" data-timestamp=" 9:19 PM" data-readed="read">Hello</span> 
       </li> 
      <li class="place-right clear-fix right-msg-container"> 
        <span class="msg-box-right" data-timestamp=" 9:19 PM" data-readed="read">You are awesome</span> 
       </li> 
      <li class="place-left clear-fix left-msg-container"> 
       <span class="msg-box-left" data-timestamp="9:20 PM">Thanks:)</span> 
       </li> 
      <li class="place-left clear-fix left-msg-container"> 
         <span class="msg-box-left" data-timestamp="9:20 PM">You, too.</span> 
       </li> 
       <li class="place-left clear-fix left-msg-container"> 
         <span class="msg-box-left" data-timestamp="9:20 PM">Ism.</span> 
       </li> 
 
 
      <li class="place-right clear-fix right-msg-container"> 
         <span class="msg-box-right" data-timestamp="9:20  PM" data-readed="read">Espn test msg.</span> 
       </li> 
       <li class="place-left clear-fix left-msg-container"> 
         <span class="msg-box-left" data-timestamp="9:21 PM">Wonderful</span> 
       </li> 
     </ul> 
 
 
   </div> 

-->

</body>

</html>

